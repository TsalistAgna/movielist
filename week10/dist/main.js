!function(n){var e={};function t(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:i})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(i,o,function(e){return n[e]}.bind(null,o));return i},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=7)}([function(n,e,t){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}(),a=[];function s(n){for(var e=-1,t=0;t<a.length;t++)if(a[t].identifier===n){e=t;break}return e}function c(n,e){for(var t={},i=[],o=0;o<n.length;o++){var r=n[o],c=e.base?r[0]+e.base:r[0],d=t[c]||0,l="".concat(c," ").concat(d);t[c]=d+1;var p=s(l),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==p?(a[p].references++,a[p].updater(u)):a.push({identifier:l,updater:f(u,e),references:1}),i.push(l)}return i}function d(n){var e=document.createElement("style"),i=n.attributes||{};if(void 0===i.nonce){var o=t.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(n){e.setAttribute(n,i[n])})),"function"==typeof n.insert)n.insert(e);else{var a=r(n.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,p=(l=[],function(n,e){return l[n]=e,l.filter(Boolean).join("\n")});function u(n,e,t,i){var o=t?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(n.styleSheet)n.styleSheet.cssText=p(e,o);else{var r=document.createTextNode(o),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(r,a[e]):n.appendChild(r)}}function v(n,e,t){var i=t.css,o=t.media,r=t.sourceMap;if(o?n.setAttribute("media",o):n.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleSheet)n.styleSheet.cssText=i;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(i))}}var m=null,h=0;function f(n,e){var t,i,o;if(e.singleton){var r=h++;t=m||(m=d(e)),i=u.bind(null,t,r,!1),o=u.bind(null,t,r,!0)}else t=d(e),i=v.bind(null,t,e),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return i(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;i(n=e)}else o()}}n.exports=function(n,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var t=c(n=n||[],e);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var i=0;i<t.length;i++){var o=s(t[i]);a[o].references--}for(var r=c(n,e),d=0;d<t.length;d++){var l=s(t[d]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}t=r}}}},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=function(n,e){var t=n[1]||"",i=n[3];if(!i)return t;if(e&&"function"==typeof btoa){var o=(a=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),r=i.sources.map((function(n){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(n," */")}));return[t].concat(r).concat([o]).join("\n")}var a,s,c;return[t].join("\n")}(e,n);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,i){"string"==typeof n&&(n=[[null,n,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<n.length;s++){var c=[].concat(n[s]);i&&o[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),e.push(c))}},e}},function(n,e){var t="\\sw.js";Object.defineProperty(e,"__esModule",{value:!0}),e.default={register:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!navigator.serviceWorker&&navigator.serviceWorker.register(t,n)}},n.exports=e.default},function(n,e,t){var i=t(0),o=t(4);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[n.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);n.exports=o.locals||{}},function(n,e,t){(e=t(1)(!1)).push([n.i,"* {\n    padding: 0;\n    margin: 0;\n}\n\nbody {\n    font-family: 'Poppins', sans-serif;\n    background-color: white;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n}\n\n\n/*\n  AppBar\n*/\n\n.app-bar {\n    padding: 8px 16px;\n    background-color: white;\n    display: grid;\n    grid-template-columns: auto 1fr auto;\n    gap: 10px;\n    position: sticky;\n    top: 0;\n    z-index: 99;\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);\n}\n\n.app-bar .app-bar__menu {\n    display: flex;\n    align-items: center;\n}\n\n.app-bar .app-bar__menu button {\n    background-color: transparent;\n    border: none;\n    font-size: 18px;\n    padding: 8px;\n    cursor: pointer;\n}\n\n.app-bar .app-bar__brand {\n    display: flex;\n    align-items: center;\n}\n\n.app-bar .app-bar__brand h1 {\n    color: #db0000;\n    text-transform: uppercase;\n    font-size: 22px;\n    user-select: none;\n}\n\n.app-bar .app-bar__navigation {\n    position: absolute;\n    top: 50px;\n    left: -180px;\n    width: 150px;\n    transition: all 0.3s;\n    padding: 8px;\n    background-color: white;\n    overflow: hidden;\n}\n\n.app-bar .app-bar__navigation.open {\n    left: 0;\n}\n\n.app-bar .app-bar__navigation ul li a {\n    display: inline-block;\n    text-decoration: none;\n    color: black;\n    padding: 8px;\n    margin-bottom: 5px;\n    width: 100%;\n}\n\n/*\n  Main Content\n*/\n\nmain {\n    padding: 32px;\n    flex: 1;\n}\n\n.content {\n    margin: 0 auto;\n    min-height: 100%;\n}\n\n.content .content__heading {\n    font-weight: normal;\n}\n\n\n/*\n  Movies\n*/\n\n.movies {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 16px;\n    margin: 32px 0;\n}\n\n\n/*\n  Movie Item\n*/\n\n.movie-item {\n    width: 100%;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 8px;\n    overflow: hidden;\n}\n\n.movie-item__header {\n    position: relative;\n}\n\n.movie-item .movie-item__header .movie-item__header__poster {\n    width: 100%;\n}\n\n.movie-item .movie-item__header .movie-item__header__rating {\n    position: absolute;\n    padding: 8px;\n    bottom: 20px;\n    left: 0;\n    display: inline-block;\n    background-color: black;\n    color: white;\n}\n\n.movie-item .movie-item__header .movie-item__header__rating .movie-item__header__rating__score {\n    margin-left: 10px;\n}\n\n.movie-item .movie-item__content {\n    padding: 16px;\n}\n\n.movie-item .movie-item__content h3 {\n    margin: 0 0 10px 0;\n}\n\n.movie-item .movie-item__content h3 a {\n    color: #db0000;\n    text-decoration: none;\n}\n\n.movie-item .movie-item__content p {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 4; /* number of lines to show */\n    -webkit-box-orient: vertical;\n}\n\n\n/*\n  Movie\n*/\n\n.movie {\n    margin: 0 auto;\n    width: 100%;\n    max-width: 800px;\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 18px 16px;\n}\n\n.movie .movie__poster {\n    width: 100%;\n    max-width: 400px;\n}\n\n.movie .movie__info h4 {\n    margin: 8px 0;\n}\n\n\n\n/*\n  Footer\n*/\n\nfooter {\n    padding: 16px;\n}\n\nfooter p {\n    text-align: center;\n    color: #aaaaaa;\n}\n\nfooter p a {\n    color: #db0000;\n    text-decoration: none;\n}\n\n\n/*\n   Like\n*/\n.like {\n    font-size: 18px;\n    position: fixed;\n    bottom: 16px;\n    right: 16px;\n    background-color: #db0000;\n    color: white;\n    border: 0;\n    border-radius: 50%;\n    width: 55px;\n    height: 55px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n",""]),n.exports=e},function(n,e,t){var i=t(0),o=t(6);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[n.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);n.exports=o.locals||{}},function(n,e,t){(e=t(1)(!1)).push([n.i,"@media screen and (min-width: 650px) {\n    .app-bar {\n        grid-template-columns: 1fr auto;\n        padding: 8px 32px;\n    }\n\n    .app-bar .app-bar__brand h1 {\n        font-size: 1.5em;\n    }\n\n    .app-bar .app-bar__menu {\n        display: none;\n    }\n\n    .app-bar .app-bar__navigation {\n        position: static;\n        width: 100%;\n    }\n\n    .app-bar .app-bar__navigation ul li {\n        display: inline-block;\n    }\n\n    .app-bar .app-bar__navigation ul li a {\n        display: inline-block;\n        width: 120px;\n        text-align: center;\n        margin: 0;\n    }\n\n    .movies {\n        grid-template-columns: 1fr 1fr;\n    }\n\n    .movie {\n        grid-template-columns: auto 1fr;\n    }\n\n    .movie .movie__title {\n        grid-column-start: 1;\n        grid-column-end: 3;\n    }\n\n    .movie .movie__overview {\n        grid-column-start: 1;\n        grid-column-end: 3;\n    }\n}\n\n@media screen and (min-width: 800px) {\n    .app-bar .app-bar__brand h1 {\n        font-size: 2em;\n    }\n}\n\n@media screen and (min-width: 850px) {\n    .movies {\n        grid-template-columns: repeat(3, 1fr);\n    }\n}\n\n@media screen and (min-width: 1200px) {\n    .movies {\n        grid-template-columns: repeat(4, 1fr);\n    }\n}\n\n@media screen and (min-width: 1600px) {\n    .movies {\n        grid-template-columns: repeat(5, 1fr);\n    }\n}\n",""]),n.exports=e},function(n,e,t){"use strict";t.r(e);t(3),t(5);var i={init({button:n,drawer:e,content:t}){n.addEventListener("click",n=>{this._toggleDrawer(n,e)}),t.addEventListener("click",n=>{this._closeDrawer(n,e)})},_toggleDrawer(n,e){n.stopPropagation(),e.classList.toggle("open")},_closeDrawer(n,e){n.stopPropagation(),e.classList.remove("open")}};var o={parseActiveUrlWithCombiner(){const n=window.location.hash.slice(1).toLowerCase(),e=this._urlSplitter(n);return this._urlCombiner(e)},parseActiveUrlWithoutCombiner(){const n=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(n)},_urlSplitter(n){const e=n.split("/");return{resource:e[1]||null,id:e[2]||null,verb:e[3]||null}},_urlCombiner:n=>(n.resource?"/"+n.resource:"/")+(n.id?"/:id":"")+(n.verb?"/"+n.verb:"")};var r={KEY:"e4b59837af69eb12ed808913a7e0782c",BASE_URL:"https://api.themoviedb.org/3/",BASE_IMAGE_URL:"https://image.tmdb.org/t/p/w500/",DEFAULT_LANGUAGE:"en-us",CACHE:{NAME:"MovieCatalogue-V1"},idb:{name:"MovieCatalogue-DB",version:1,objects:{movie:{key:"id",name:"movie"}}},WEB_SOCKET_SERVER:"ws://localhost:8081"};var a={NOW_PLAYING:`${r.BASE_URL}movie/now_playing?api_key=${r.KEY}&language=${r.DEFAULT_LANGUAGE}&page=1`,UPCOMING:`${r.BASE_URL}movie/upcoming?api_key=${r.KEY}&language=${r.DEFAULT_LANGUAGE}&page=1`,DETAIL:n=>`${r.BASE_URL}movie/${n}?api_key=${r.KEY}`};var s=class{static async nowPlayingMovies(){const n=await fetch(a.NOW_PLAYING);return(await n.json()).results}static async upcomingMovies(){const n=await fetch(a.UPCOMING);return(await n.json()).results}static async detailMovie(n){return(await fetch(a.DETAIL(n))).json()}};const c=n=>`\n  <div class="movie-item">\n    <div class="movie-item__header">\n        <img class="movie-item__header__poster" alt="${n.title}"\n            src="${n.backdrop_path?r.BASE_IMAGE_URL+n.backdrop_path:"https://picsum.photos/id/666/800/450?grayscale"}">\n        <div class="movie-item__header__rating">\n            <p>⭐️<span class="movie-item__header__rating__score">${n.vote_average}</span></p>\n        </div>\n    </div>\n    <div class="movie-item__content">\n        <h3><a href="${"/#/detail/"+n.id}">${n.title}</a></h3>\n        <p>${n.overview}</p>\n    </div>\n  </div>\n  `;var d={render:async()=>'\n          <div class="content">\n            <h2 class="content__heading">Now Playing in Cinema</h2>\n            <div id="movies" class="movies">\n     \n            </div>\n          </div>\n        ',async afterRender(){const n=await s.nowPlayingMovies(),e=document.querySelector("#movies");n.forEach(n=>{e.innerHTML+=c(n)})}};var l={render:async()=>'\n          <div class="content">\n            <h2 class="content__heading">Upcoming in Cinema</h2>\n            <div id="movies" class="movies">\n     \n            </div>\n          </div>\n        ',async afterRender(){const n=await s.upcomingMovies(),e=document.querySelector("#movies");n.forEach(n=>{e.innerHTML+=c(n)})}};let p,u;const v=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,_=new WeakMap;let g={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return m.get(n);if("objectStoreNames"===e)return n.objectStoreNames||h.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return y(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function b(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(u||(u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(x(this),e),y(v.get(this))}:function(...e){return y(n.apply(x(this),e))}:function(e,...t){const i=n.call(x(this),e,...t);return h.set(i,e.sort?e.sort():[e]),y(i)}}function w(n){return"function"==typeof n?b(n):(n instanceof IDBTransaction&&function(n){if(m.has(n))return;const e=new Promise((e,t)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",r),n.removeEventListener("abort",r)},o=()=>{e(),i()},r=()=>{t(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",r),n.addEventListener("abort",r)});m.set(n,e)}(n),e=n,(p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(n=>e instanceof n)?new Proxy(n,g):n);var e}function y(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((e,t)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",r)},o=()=>{e(y(n.result)),i()},r=()=>{t(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",r)});return e.then(e=>{e instanceof IDBCursor&&v.set(e,n)}).catch(()=>{}),_.set(e,n),e}(n);if(f.has(n))return f.get(n);const e=w(n);return e!==n&&(f.set(n,e),_.set(e,n)),e}const x=n=>_.get(n);const k=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],L=new Map;function S(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(L.get(e))return L.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=E.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!k.includes(t))return;const r=async function(n,...e){const r=this.transaction(n,o?"readwrite":"readonly");let a=r.store;return i&&(a=a.index(e.shift())),(await Promise.all([a[t](...e),o&&r.done]))[0]};return L.set(e,r),r}g=(n=>({...n,get:(e,t,i)=>S(e,t)||n.get(e,t,i),has:(e,t)=>!!S(e,t)||n.has(e,t)}))(g);const M=r.idb.objects.movie.key,B=r.idb.objects.movie.name,A=function(n,e,{blocked:t,upgrade:i,blocking:o,terminated:r}={}){const a=indexedDB.open(n,e),s=y(a);return i&&a.addEventListener("upgradeneeded",n=>{i(y(a.result),n.oldVersion,n.newVersion,y(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),s.then(n=>{r&&n.addEventListener("close",()=>r()),o&&n.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}(r.idb.name,r.idb.version,{upgrade(n){n.createObjectStore(B,{keyPath:M})}});var C={async get(n){if(n)return(await A).get(B,n)},getAll:async()=>(await A).getAll(B),async put(n){if(n.hasOwnProperty("id"))return(await A).put(B,n)},delete:async n=>(await A).delete(B,n)};var D={async init({likeButtonContainer:n,movie:e}){this._likeButtonContainer=n,this._movie=e,await this._renderButton()},async _renderButton(){const{id:n}=this._movie;await this._isMovieExist(n)?this._renderLiked():this._renderLike()},_isMovieExist:async n=>!!await C.get(n),_renderLike(){this._likeButtonContainer.innerHTML='\n  <button aria-label="like this movie" id="likeButton" class="like">\n     <i class="fa fa-heart-o" aria-hidden="true"></i>\n  </button>\n';document.querySelector("#likeButton").addEventListener("click",async()=>{await C.put(this._movie),this._renderButton()})},_renderLiked(){this._likeButtonContainer.innerHTML='\n  <button aria-label="unlike this movie" id="likeButton" class="like">\n    <i class="fa fa-heart" aria-hidden="true"></i>\n  </button>\n';document.querySelector("#likeButton").addEventListener("click",async()=>{await C.delete(this._movie.id),this._renderButton()})}};var I={"/":d,"/now-playing":d,"/upcoming":l,"/detail/:id":{render:async()=>'\n          <div id="movie" class="movie"></div>\n          <div id="likeButtonContainer"></div>\n        ',async afterRender(){const n=o.parseActiveUrlWithoutCombiner(),e=await s.detailMovie(n.id);document.querySelector("#movie").innerHTML=(n=>`\n  <h2 class="movie__title">${n.title}</h2>\n  <img class="movie__poster" src="${r.BASE_IMAGE_URL+n.poster_path}" alt="${n.title}" />\n  <div class="movie__info">\n  <h3>Information</h3>\n    <h4>Tagline</h4>\n    <p>${n.tagline}</p>\n    <h4>Release Date</h4>\n    <p>${n.release_date}</p>\n    <h4>Duration</h4>\n    <p>${n.runtime} minutes</p>\n    <h4>Rating</h4>\n    <p>${n.vote_average}</p>\n  </div>\n  <div class="movie__overview">\n    <h3>Overview</h3>\n    <p>${n.overview}</p>\n  </div>\n`)(e),D.init({likeButtonContainer:document.querySelector("#likeButtonContainer"),movie:{id:e.id,title:e.title,overview:e.overview,backdrop_path:e.backdrop_path,vote_average:e.vote_average}})}},"/like":{render:async()=>'\n      <div class="content">\n        <h2 class="content__heading">Your Liked Movie</h2>\n        <div id="movies" class="movies">\n \n        </div>\n      </div>\n    ',async afterRender(){const n=await C.getAll(),e=document.querySelector("#movies");n.length>0?n.forEach(n=>{e.innerHTML+=c(n)}):e.innerHTML='<div class="movie-item__empty">Empty!</div>'}}};var j=class{constructor({button:n,drawer:e,content:t}){this._button=n,this._drawer=e,this._content=t,this._initialAppShell()}_initialAppShell(){i.init({button:this._button,drawer:this._drawer,content:this._content})}async renderPage(){const n=o.parseActiveUrlWithCombiner(),e=I[n];this._content.innerHTML=await e.render(),await e.afterRender()}},N=t(2),P=t.n(N);var T=async()=>{"serviceWorker"in navigator?await P.a.register():console.log("Service worker not supported in this browser")};var U={sendNotification({title:n,options:e}){if(this._checkAvailability())return this._checkPermission()?void this._showNotification({title:n,options:e}):(console.log("User did not yet granted permission"),void this._requestPermission());console.log("Notification not supported in this browser")},_checkAvailability:()=>"Notification"in window,_checkPermission:()=>"granted"===Notification.permission,async _requestPermission(){const n=await Notification.requestPermission();"denied"===n&&console.log("Notification Denied"),"default"===n&&console.log("Permission closed")},async _showNotification({title:n,options:e}){(await navigator.serviceWorker.ready).showNotification(n,e)}};var R=()=>{new WebSocket(r.WEB_SOCKET_SERVER).onmessage=n=>{console.log(n.data);const e=JSON.parse(n.data);U.sendNotification({title:e.title+" is on cinema!",options:{body:e.overview,image:""+(r.BASE_IMAGE_URL+e.poster_path)}})}};const O=new j({button:document.querySelector("#hamburgerButton"),drawer:document.querySelector("#navigationDrawer"),content:document.querySelector("#mainContent")});window.addEventListener("hashchange",()=>{O.renderPage()}),window.addEventListener("load",()=>{O.renderPage(),T(),R()})}]);